Данный проект создан для проверки работоспособности API Opennebula


Для тестирования задействован Python3 с библиотеками:
    pyone   (библиотека для взаимодействия с OpenNebula API)
    pytest  (библиотека для тестирования)


В корневой директории проекта содержатся файлы:

    prepare.sh  -   подготовительный скрипт для настройки окружения (создания виртуального окружения, скачивания
                    необходимых библиотек и т.д.). Запускается разово! После выполнения в корне проекта должна появиться директория ".venv". 

    _tests.py   -   py-файл, содержащий в себе объект(словарь(дерево)) с объектами (дата-классами) информации о
                    тестах. Путь к объектам в словаре определяется ключами по аналогии с названием тестируемого метода:
                    TESTS["one"]["system"]["version"] содержит в себе информацию о тесте для метода "one.system.version"

                    Объект информаци о тесте (dataclass) содержит поля:
                        xml_rpc_method:     str  (название метода)
                        test_file_path:     str  (путь к .py файлу с тестами для метода)
                        cli_command:        str  (cli аналог xml метода)

    test.py     -   Точка входа в тестирование. Принимает аргумент - тестируемый метод для выполнения тестов.
                    Пример: 
                        [python3 test.py one.system] - запустит тесты для всех методов "one.system"
                        [python3 test.py one.system.config] - запустит тест конкретного метода
                        [python3 test.py] - равносильно аргументу "one" и запуску всех созданных тестов
                        Естественно, должны существовать тесты и объекты данных о тестах в TESTS файла _tests.py

    
Добавление тестов:
    1. Создать файл с названием test_*.py в директории tests/ (можно создать внутренние директории для разграничения и удобства)
    2. Написать в созданном файле тесты (pytest запустит все функции с названием test_*)
    3. Дописать в _tests.py информацию о тесте (см. аналог уже написанных) с указанием расположения файла теста из пункта 1
    4. Проверить работу теста


Иное:
    Тесты запускаются подпроцессом (см. test.py) с игнорированием потока вывода в случае успешного выполнения всех функций в написанном тест-файле.
    В случае, если хотя бы 1 функция теста провалена (или случится иная ошибка выполнения кода) - код выполнения подпроцесса будет ненулевой и, соотвественно,
    будет напечатана информация из потока вывода процесса (pytest выводы о тестах), содержащая информацию какая функция не сработала и почему.
    В любом исходе будет напечатана строка {xml_rpc_method}_____{PASS/FAIL}


P.S.:
    Иметь ввиду!
    В файле prepare.sh в списке pip пакетов на установку присутствует пакет lxml==4.4.0 (с явно указанной версией), так как обнаружена проблема установки 
    пакета pyone на python 3.7.3 (пытается установить lxml версию, которая неподходит). Для иных версий python корректность установки pyone не проверялась. 

P.P.S.:
    Модуль api создан для удобства использования pyone. Этот модуль - обертка, так как pyone создан очень сжато и не имеет конкретных классов под каждый метод, из-за чего подсказками ide не понять какие методы существуют вообще и какие параметры в них передавать (только читать документацию https://docs.opennebula.io/6.8/integration_and_development/system_interfaces/api.html), а что возвращают методы - тайна покрытая мраком, которую нужно изучать под микроскопом print(dir(returned_object))